if (self.CavalryLogger) { CavalryLogger.start_js(["GZWrZ"]); }

__d('MessengerBotMenuDataFetcher',['AsyncRequest','Cache','MessengerBotComposerWebGraphQLQuery','MNCommercePageSetting','XMessengerBotsMenuController'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$MessengerBotMenuDataFetcher1=new (c('Cache'))();this.$MessengerBotMenuDataFetcher2=new (c('Cache'))();}h.prototype.getMenuItems=function(i,j,k){if(this.$MessengerBotMenuDataFetcher1.has(i)){j(this.$MessengerBotMenuDataFetcher1.get(i));return;}var l=c('XMessengerBotsMenuController').getURIBuilder().setString('page_id',i).getURI();new (c('AsyncRequest'))().setURI(l).setHandler(function(m){var n=m.payload.menu;this.$MessengerBotMenuDataFetcher1.set(i,n);j(n);}.bind(this)).setErrorHandler(function(m){k();}).send();};h.prototype.getHasMenu=function(i,j,k){if(!this.$MessengerBotMenuDataFetcher2.has(i)){var l=c('MessengerBotComposerWebGraphQLQuery').getURI({node_id:i});new (c('AsyncRequest'))().setURI(l).setHandler(function(n){var o=n.payload.data.node,p=o.commerce_page_settings||[],q=p.indexOf(c('MNCommercePageSetting').STRUCTURED_MENU_ENABLED)!==-1;this.$MessengerBotMenuDataFetcher2.set(i,q);j(q);}.bind(this)).setErrorHandler(function(n){this.$MessengerBotMenuDataFetcher2.set(i,false);k();}.bind(this)).send();}var m=this.$MessengerBotMenuDataFetcher2.get(i);m=m?m:false;j(m);return m;};f.exports=new h();}),null);